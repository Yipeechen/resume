(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{128:function(n,e,t){"use strict";t.r(e);var r=t(97),o=t.n(r),a=t(98),i=t.n(a),c=t(65),u=t.n(c),s=t(99),l=t.n(s),p=t(101),d=t.n(p),f=t(103),h=t.n(f),v=t(9),m=t.n(v),g=t(4),b=t.n(g),y=t(0),x=t(1),w=t.n(x),T=t(21),j=t(3),P=t(2);function k(){var n=b()(["\n  background-color: ",";\n  flex: 2;\n  padding: 9.5px;\n  outline: none;\n  border: 0;\n  cursor: pointer;\n"]);return k=function(){return n},n}function O(){var n=b()(["\n  margin-right: 8px;\n  outline: none;\n  flex: 10;\n  font-size: 16px;\n  line-height: 2;\n  border: 1px solid ",";\n  padding: 0 0 0 8px;\n"]);return O=function(){return n},n}function S(){var n=b()(["\n    width: 100%;\n  "]);return S=function(){return n},n}function R(){var n=b()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 80%;\n  margin: 0 auto;\n  ","\n"]);return R=function(){return n},n}var E=j.d.div(R(),(function(n){return n.theme.tablet_mobile(S())})),D=j.d.input.attrs({type:"text",placeholder:"搜尋"})(O(),(function(n){return n.theme.color.grey})),M=j.d.button.attrs({type:"button"})(k(),(function(n){return n.theme.color.grey})),V=function(n){var e=n.searchTerm,t=n.updateSearchTerm,r=n.fetchPlaylist,o=n.resetPlaylist;return Object(P.jsxs)(E,{children:[Object(P.jsx)(D,{onChange:function(n){var e=n.target.value;t(e)},onKeyUp:function(n){13===(n.keyCode||n.which)&&e&&(o(),r({searchTerm:e}))},value:e}),Object(P.jsx)(M,{onClick:function(){e&&(o(),r({searchTerm:e}))},children:"Search"})]})};V.propTypes={fetchPlaylist:w.a.func,resetPlaylist:w.a.func,searchTerm:w.a.string,updateSearchTerm:w.a.func},V.defaultProps={fetchPlaylist:null,resetPlaylist:null,searchTerm:"",updateSearchTerm:null};var I=V,U=t(11),F=t.n(U);var C={convertISOtoTimestamp:function(n){return new Date(n).getTime()},relativeNow:function(n){var e=(new Date).getTime()-n;if(e<36e5){var t=Math.floor(e/6e4);return 0===t?"剛剛":"".concat(t," 分鐘前")}if(e<864e5){var r=Math.floor(e/36e5);return"".concat(r," 小時前")}if(e<6048e5){var o=Math.floor(e/864e5);return"".concat(o," 天前")}if(e<2592e6){var a=Math.floor(e/6048e5);return"".concat(a," 週前")}if(e<31104e6){var i=Math.floor(e/2592e6);return"".concat(i," 月前")}var c=Math.floor(e/31104e6);return"".concat(c," 年前")}};function N(){var n=b()(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: normal;\n  line-height: 2rem;\n  max-height: 4rem;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  display: -webkit-box;\n"]);return N=function(){return n},n}function q(){var n=b()(["\n  grid-area: info;\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n"]);return q=function(){return n},n}function J(){var n=b()(["\n  grid-area: title;\n  color: #000;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: normal;\n  line-height: 2rem;\n  max-height: 4rem;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  display: -webkit-box;\n  text-align: left;\n"]);return J=function(){return n},n}function L(){var n=b()(["\n  margin-top: -4px;\n  width: 95%;\n  border-radius: 50%;\n"]);return L=function(){return n},n}function A(){var n=b()(["\n  grid-area: avatar;\n"]);return A=function(){return n},n}function B(){var n=b()(['\n  margin: 8px auto;\n  display: grid;\n  grid-template-columns: 2fr 10fr;\n  grid-template-rows: auto;\n  grid-gap: 8px 8px;\n  grid-template-areas:\n  "avatar title"\n  "avatar info";\n']);return B=function(){return n},n}function _(){var n=b()(["\n  width: 100%;\n  background: ",";\n"]);return _=function(){return n},n}function z(){var n=b()(["\n  overflow: hidden;\n  width: 100%;\n  text-align: center;\n\n  &:empty {\n    position: relative; \n    background: ",";\n    min-height: 200px;\n    &::after {\n      display: block; \n      content: ''; \n      position: absolute; \n      width: 100%; \n      height: 100%; \n      transform: translateX(-100%); \n      background: -webkit-gradient(linear, left top, right top,\n                  from(transparent),  \n                  color-stop(rgba(255, 255, 255, 0.2)), \n                  to(transparent)); \n                    \n      background: linear-gradient(90deg, transparent, \n                  rgba(255, 255, 255, 0.2), transparent); \n      animation: "," 0.8s infinite;\n    }\n  }\n"]);return z=function(){return n},n}function K(){var n=b()(["\n  100% { \n    transform: translateX(100%); \n  } \n"]);return K=function(){return n},n}function G(){var n=b()(["\n    grid-template-columns: repeat(1 ,1fr);\n  "]);return G=function(){return n},n}function H(){var n=b()(["\n    grid-template-columns: repeat(3 ,1fr);\n  "]);return H=function(){return n},n}function Q(){var n=b()(["\n  display: grid;\n  grid-template-columns: repeat(4 ,1fr);\n  grid-gap: 32px 16px;\n  margin: 48px auto;\n  ","\n  ","\n"]);return Q=function(){return n},n}var W=j.d.div(Q(),(function(n){return n.theme.tablet(H())}),(function(n){return n.theme.mobile(G())})),X=Object(j.e)(K()),Z=j.d.a.attrs((function(n){return{href:"https://www.youtube.com/watch?v=".concat(n.videoId),target:"_blank"}}))(z(),(function(n){return n.theme.color.grey}),X),Y=j.d.img.attrs((function(n){return{src:n.img}}))(_(),(function(n){return n.theme.color.grey})),$=j.d.div(B()),nn=j.d.div(A()),en=j.d.img.attrs({src:"https://via.placeholder.com/400?text=avatar"})(L()),tn=j.d.h5(J()),rn=j.d.div(q(),(function(n){return n.theme.color.greyDark})),on=j.d.p(N()),an=function(n){var e=n.cardDetail;return Object(P.jsx)(P.Fragment,{children:e?Object(P.jsxs)(Z,{videoId:e.videoId,children:[Object(P.jsx)(Y,{img:e.img}),Object(P.jsxs)($,{children:[Object(P.jsx)(nn,{children:Object(P.jsx)(en,{})}),Object(P.jsx)(tn,{children:e.title}),Object(P.jsxs)(rn,{children:[Object(P.jsx)(on,{children:e.channelTitle}),e.publishTime]})]})]}):Object(P.jsx)(Z,{})})};an.propTypes={cardDetail:w.a.object},an.defaultProps={cardDetail:{}};var cn=function(n){var e=n.data,t=Object(T.c)((function(n){return n.yt.loading}));return Object(P.jsxs)(W,{children:[e.map((function(n,e){var t,r,o,a,i;return Object(P.jsx)(an,{cardDetail:{videoId:null==n||null===(t=n.id)||void 0===t?void 0:t.videoId,img:null==n||null===(r=n.snippet)||void 0===r?void 0:r.thumbnails.medium.url,title:null==n||null===(o=n.snippet)||void 0===o?void 0:o.title,channelTitle:null==n||null===(a=n.snippet)||void 0===a?void 0:a.channelTitle,publishTime:C.relativeNow(C.convertISOtoTimestamp(null==n||null===(i=n.snippet)||void 0===i?void 0:i.publishedAt))}},e)})),t&&F()(Array(8)).map((function(n,e){return Object(P.jsx)(an,{cardDetail:null},e)}))]})};cn.propTypes={data:w.a.array},cn.defaultProps={data:[]};var un=cn,sn=t(66),ln=t.n(sn),pn=t(67),dn=t.n(pn),fn=t(7),hn=t(105);function vn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var mn,gn,bn=(mn={timeout:1e4,headers:{"content-type":"application/json;charset=UTF-8"},baseURL:"https://www.googleapis.com/youtube/v3",interceptors:{response:function(n){return n.data}}},(gn=t.n(hn).a.create(mn)).interceptors.request.use((function(n){var e,t=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(t),!0).forEach((function(e){m()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n.data),r={url:"".concat(n.baseURL).concat(n.url),method:n.method,params:n.params,data:t};return console.info("REQUEST",JSON.stringify(r)),null!==(e=mn.interceptors)&&void 0!==e&&e.request?mn.interceptors.request(n):n})),gn.interceptors.response.use((function(n){var e,t={status:n.status,url:n.config.url,data:n.data},r=JSON.stringify(t);return r.length>300&&(r="".concat(r.slice(0,300)," ...more}")),console.info("RESPONSE_SUCCESS",r),n.data=n.data||void 0,null!==(e=mn.interceptors)&&void 0!==e&&e.response?mn.interceptors.response(n):n.data}),(function(n){var e,t,r={status:null===(e=n.response)||void 0===e?void 0:e.status,code:n.code,message:n.message,url:null===(t=n.config)||void 0===t?void 0:t.url};return console.info("REQUEST_FAILURE",JSON.stringify(r)),Promise.reject(n)})),gn),yn=function(n){return bn(n)},xn="AIzaSyBKKsfmCBsnM1RTiewoWD-O1qf5fZaw5fo",wn=function(){var n=dn()(ln.a.mark((function n(e){var t;return ln.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yn({url:"/videos",method:"GET",params:{part:"snippet",chart:"mostPopular",pageToken:e.nextPageToken,maxResults:12,key:xn}});case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Tn=function(){var n=dn()(ln.a.mark((function n(e){var t;return ln.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yn({url:"/search",method:"GET",params:{part:"snippet",type:"video",pageToken:e.nextPageToken,q:e.searchTerm,maxResults:12,key:xn}});case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function jn(){return function(n){n({type:fn.a})}}function Pn(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=h()(n);if(e){var o=h()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return d()(this,t)}}function kn(){var n=b()(["\n  margin: 40px auto;\n  width: 90%;\n"]);return kn=function(){return n},n}var On=j.d.div(kn()),Sn=function(n){l()(t,n);var e=Pn(t);function t(n){var r;return o()(this,t),r=e.call(this),m()(u()(r),"componentDidMount",(function(){var n=r.props.onFetchMostPopularVideo;window.addEventListener("scroll",r.infiniteScroll),n({})})),m()(u()(r),"componentWillUnmount",(function(){window.removeEventListener("scroll",r.infiniteScroll)})),m()(u()(r),"infiniteScroll",(function(){var n=r.props,e=n.videos,t=n.onSearchVideo,o=n.nextPageToken,a=n.loading,i=n.onFetchMostPopularVideo,c=r.state.searchTerm,u=window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-300;e.length&&o&&!a&&u&&(c?t({searchTerm:c,nextPageToken:o}):i({nextPageToken:o}))})),m()(u()(r),"updateSearchTerm",(function(n){r.setState({searchTerm:n})})),r.state={searchTerm:""},r}return i()(t,[{key:"render",value:function(){var n=this.props,e=n.videos,t=n.onSearchVideo,r=n.onResetPlaylist,o=this.state.searchTerm;return Object(P.jsxs)(On,{children:[Object(P.jsx)(I,{searchTerm:o,updateSearchTerm:this.updateSearchTerm,fetchPlaylist:t,resetPlaylist:r}),Object(P.jsx)(un,{data:e})]})}}]),t}(y.Component);Sn.propTypes={loading:w.a.bool,nextPageToken:w.a.string,videos:w.a.array,onFetchMostPopularVideo:w.a.func,onResetPlaylist:w.a.func,onSearchVideo:w.a.func},Sn.defaultProps={loading:!1,nextPageToken:"",videos:[],onFetchMostPopularVideo:null,onResetPlaylist:null,onSearchVideo:null};e.default=Object(T.b)((function(n){return{videos:n.yt.videos,loading:n.yt.loading,nextPageToken:n.yt.nextPageToken}}),(function(n){return{onFetchMostPopularVideo:function(e){return n((t=e.nextPageToken,r=void 0===t?null:t,function(){var n=dn()(ln.a.mark((function n(e){var t;return ln.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:fn.b}),n.prev=1,n.next=4,wn({nextPageToken:r});case 4:t=n.sent,e((a={items:t.items,nextPageToken:t.nextPageToken},{type:fn.d,payload:a})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.warn(n.t0),e((o=n.t0,{type:fn.c,payload:o}));case 12:case"end":return n.stop()}var o,a}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()));var t,r},onSearchVideo:function(e){return n((r=(t=e).searchTerm,o=t.nextPageToken,a=void 0===o?null:o,function(){var n=dn()(ln.a.mark((function n(e){var t;return ln.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:fn.e}),n.prev=1,n.next=4,Tn({nextPageToken:a,searchTerm:r});case 4:t=n.sent,e((i={items:t.items,nextPageToken:t.nextPageToken},{type:fn.g,payload:i})),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.warn(n.t0),e((o=n.t0,{type:fn.f,payload:o}));case 12:case"end":return n.stop()}var o,i}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()));var t,r,o,a},onResetPlaylist:function(){return n(jn())}}}))(Sn)}}]);